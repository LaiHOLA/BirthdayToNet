<!DOCTYPE html>
<html lang="zh-Hans" data-theme="rose">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>24 — Bloom Edition</title>
  <meta name="theme-color" content="#e8d7a6" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <style>
    :root{
      --bg-a:#f6f1ea; --bg-b:#eef2ff; --bg-c:#f3faf5; /* ivory mist */
      --ink:#1f2937; --muted:#6b7280; --card:rgba(255,255,255,.48);
      --accent:#b4882d; --accent-2:#e8d7a6; --accent-3:#9be7c4;
      --blur:14px;
    }
    :root.noir{
      --bg-a:#0e0f13; --bg-b:#12151b; --bg-c:#0b1013; --ink:#e7e7ea; --muted:#a1a1aa; --card:rgba(16,18,22,.5);
      --accent:#caa969; --accent-2:#e8d7a6; --accent-3:#8fcfb5;
    }

    html,body{height:100%}
    body{
      margin:0; color:var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Helvetica Neue, Arial, "PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
      background: radial-gradient(1200px 800px at 20% 10%, var(--bg-a), transparent 60%),
                  radial-gradient(1000px 1000px at 80% 30%, var(--bg-b), transparent 60%),
                  radial-gradient(1200px 800px at 40% 90%, var(--bg-c), transparent 60%),
                  linear-gradient(120deg, var(--bg-a), var(--bg-b), var(--bg-c));
      background-size:140% 140%;
      animation:bg-shift 18s ease-in-out infinite alternate; overflow:hidden;
    }
    @keyframes bg-shift{from{background-position:0% 0%,100% 0%,0% 100%,0% 50%}to{background-position:100% 100%,0% 100%,100% 0%,100% 50%}}

    .wrap{position:relative; height:100%; display:grid; place-items:center;}
    .panel{ position:relative; z-index:3; max-width: 960px; width:min(92vw,960px);
      padding: clamp(18px,3.6vw,44px); border-radius:28px; background:var(--card);
      box-shadow:0 20px 50px rgba(0,0,0,.08), inset 0 0 1px rgba(255,255,255,.62);
      backdrop-filter: blur(var(--blur)) saturate(1.15);
    }
    /* conic gold ring */
    .panel::before{content:""; position:absolute; inset:-1px; border-radius:28px; padding:1px;
      background: conic-gradient(from 130deg, rgba(255,255,255,.7), rgba(212,175,55,.65), rgba(255,255,255,.7));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor; mask-composite: exclude; animation:border-rotate 18s linear infinite;}
    @keyframes border-rotate{to{transform:rotate(360deg)}}

    .hero{ font-size: clamp(56px, 9vw, 96px); line-height:1; letter-spacing:.5px; margin:0 0 .35em;
      background: linear-gradient(90deg, var(--ink), #4b5563); -webkit-background-clip:text; background-clip:text; color:transparent; }
    .hero.gold{ background: linear-gradient(90deg, var(--accent), var(--accent-2) 60%, var(--accent)); }
    .hero.fade{ animation: heroFade .9s ease forwards; }
    @keyframes heroFade{ to{ opacity:0; transform: translateY(-8px) scale(.98);} }

    .countdown{ display:flex; gap: clamp(10px, 2vw, 18px); flex-wrap:wrap; }
    .dd{ flex:1 1 auto; min-width: 120px; text-align:center; padding: 16px 12px; border-radius: 20px; background: rgba(255,255,255,.66); border:1px solid rgba(255,255,255,.86); box-shadow: inset 0 1px 0 rgba(255,255,255,.7), 0 8px 24px rgba(0,0,0,.06); }
    .num{ display:block; font-variant-numeric: tabular-nums; font-size: clamp(32px, 6.5vw, 56px); font-weight:800; letter-spacing:.5px; }
    .lab{ display:block; margin-top:6px; color:var(--muted); letter-spacing:.5px; font-size:12px; text-transform:uppercase; }
    .num.tick{ animation: tick .6s cubic-bezier(.2,.7,.2,1); }
    @keyframes tick{ 0%{ transform: translateY(6px); opacity:.6;} 50%{ transform: translateY(0); opacity:1;} 100%{ transform:none; } }

    /* Floating phrases */
    .float-layer{ position:fixed; inset:-5vh -5vw; pointer-events:none; z-index:1; }
    .phrase{ position:absolute; white-space:nowrap; font-size: clamp(12px, 1.6vw, 16px); color:#2b2b2b; opacity:.4; mix-blend-mode:multiply;
      filter: drop-shadow(0 2px 3px rgba(0,0,0,.07)); font-style:italic; letter-spacing:.2px; animation: rise 16s linear forwards; }
    @keyframes rise{ 0%{ transform: translate(var(--x,0), var(--y,0)) scale(.95) rotate(var(--rot,0deg)); opacity: var(--op,.35);} 85%{ opacity: var(--op,.35);} 100%{ transform: translate(calc(var(--x,0) + var(--dx,0px)), calc(var(--y,0) - 18vh)) scale(1) rotate(calc(var(--rot,0deg) + 4deg)); opacity:0; } }

    /* Reveal */
    .reveal{ display:none; }
    .reveal.active{ display:block; }
    .line{ font-family: ui-serif, Georgia, "Songti SC","Noto Serif SC", serif; font-size: clamp(28px, 5vw, 64px); line-height:1.15; font-weight:700; letter-spacing:.5px; text-align:center; }
    .line .en{ display:block; background: linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent; }
    .line .zh{ display:block; margin-top:.35em; color:#2a2a2a; }

    /* Garden & sparkles */
    .garden{ position:fixed; inset:0; pointer-events:none; z-index:2; }
    .flower{ position:absolute; width:22px; height:22px; opacity:0; transform: translate(-50%,-50%) scale(.3) rotate(0deg); animation:bloom 1.4s ease forwards, drift 10s ease-in-out infinite alternate; }
    @keyframes bloom{ to{ opacity:1; transform: translate(-50%, -50%) scale(1) rotate(360deg);} }
    @keyframes drift{ 0%{ filter:hue-rotate(0deg); transform: translate(-50%, -50%) scale(1) translateY(0);} 100%{ filter:hue-rotate(12deg); transform: translate(-50%, -50%) scale(1.05) translateY(-6px);} }

    .sparkles{ position:fixed; inset:0; pointer-events:none; z-index:3; }
    .sparkle{ position:absolute; width:3px; height:3px; border-radius:50%; background:#fff; box-shadow: 0 0 10px rgba(255,255,255,.85), 0 0 24px rgba(232,215,166,.55); opacity:0; animation: twinkle 2.2s ease-in-out forwards; }
    @keyframes twinkle{ 0%{ opacity:0; transform: scale(.6);} 20%{ opacity:1; transform: scale(1.2);} 70%{ opacity:.3; transform: scale(.8);} 100%{ opacity:0; transform: scale(.6);} }

    /* Theme toggle dot */
    .mode{ position:fixed; top:16px; right:16px; width:34px; height:34px; border-radius:999px; z-index:11; cursor:pointer;
      background: radial-gradient(12px 12px at 70% 30%, #fff, rgba(255,255,255,0)), conic-gradient(from 200deg, var(--accent), var(--accent-2), var(--accent));
      border:1px solid rgba(255,255,255,.7); box-shadow:0 8px 24px rgba(0,0,0,.12); backdrop-filter: blur(10px); }
    .mode:active{ transform: scale(.96); }

    @media (prefers-reduced-motion: reduce){
      body{ animation:none; }
      .phrase{ animation-duration:0s; }
      .flower{ animation:none; opacity:.9; }
    }
    /* Luxury palettes */
  :root[data-theme="gold"]{ --accent:#b4882d; --accent-2:#e8d7a6; --bg-a:#f6f1ea; --bg-b:#efe8d8; --bg-c:#f8f6ef; }
  :root[data-theme="rose"]{ --accent:#d08a98; --accent-2:#f5d9df; --bg-a:#f9f4f2; --bg-b:#efeaf6; --bg-c:#f6fbf7; }
  :root[data-theme="emerald"]{ --accent:#2fa56a; --accent-2:#c7efd9; --bg-a:#f2fbf6; --bg-b:#e7f4ee; --bg-c:#eef6ff; }
  :root[data-theme="sapphire"]{ --accent:#3a67d6; --accent-2:#c7d8ff; --bg-a:#f2f6ff; --bg-b:#edf1fb; --bg-c:#f5fbff; }

  /* Vignette for depth */
  .vignette{ position:fixed; inset:-10vh -10vw; pointer-events:none; z-index:0;
    background: radial-gradient(55% 60% at 50% 45%, rgba(0,0,0,0) 0%, rgba(0,0,0,.03) 62%, rgba(0,0,0,.08) 100%); }

  /* Countdown cards gloss */
  .dd{ position:relative; }
  .dd::after{ content:""; position:absolute; inset:0; border-radius:inherit;
    background: linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,0) 40%);
    pointer-events:none; mix-blend-mode: screen; }

  /* Palette switcher */
  .palette{ position:fixed; top:16px; right:60px; display:flex; gap:10px; z-index:11;
    background: rgba(255,255,255,.45); padding:6px 8px; border-radius:999px; backdrop-filter: blur(10px); border:1px solid rgba(255,255,255,.7); box-shadow:0 8px 24px rgba(0,0,0,.12); }
  .swatch{ width:18px; height:18px; border-radius:50%; border:1px solid rgba(255,255,255,.9); cursor:pointer; box-shadow: inset 0 0 0 1px rgba(0,0,0,.05), 0 1px 3px rgba(0,0,0,.1); }
  .swatch:active{ transform: scale(.92); }
  .swatch.gold{ background: conic-gradient(from 200deg, #b4882d, #e8d7a6, #b4882d); }
  .swatch.rose{ background: conic-gradient(from 200deg, #d08a98, #f5d9df, #d08a98); }
  .swatch.emerald{ background: conic-gradient(from 200deg, #2fa56a, #c7efd9, #2fa56a); }
  .swatch.sapphire{ background: conic-gradient(from 200deg, #3a67d6, #c7d8ff, #3a67d6); }

  /* Subtle shimmer on reveal line */
  .line .en{
    background-size:220% 100%;
    background-image:
      linear-gradient(90deg, var(--accent) 0%, var(--accent-2) 50%, var(--accent) 100%),
      linear-gradient(90deg, rgba(255,255,255,.35) 0%, rgba(255,255,255,0) 42%, rgba(255,255,255,.45) 58%, rgba(255,255,255,0) 100%);
    background-blend-mode: soft-light, normal;
    animation: shimmer 18s ease-in-out infinite;
    filter: drop-shadow(0 .5px 0 rgba(255,255,255,.25)) drop-shadow(0 1px 2px rgba(0,0,0,.08));
  }
  @keyframes shimmer{ 0%{ background-position:0% 0; } 100%{ background-position:200% 0; } }
  /* Rose default + sharper glass + refined type */
  :root{ --blur: 8px; --card: rgba(255,255,255,.78); }
  .panel{ background: var(--card); border: 1px solid rgba(255,255,255,.9); }
  body{ font-family: "Segoe UI","SF Pro Text","Helvetica Neue",Roboto,system-ui,-apple-system,"Noto Sans",Arial,"PingFang SC","Microsoft YaHei",sans-serif; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; }
  .hero, .line{ font-family: ui-serif, Georgia, "Times New Roman", "Songti SC", "Noto Serif SC", serif; letter-spacing: .3px; }
  .hero.fade-out{ animation: hero-out .8s ease forwards; }
  @keyframes hero-out{ to{ opacity:0; transform: translateY(-6px) scale(.985);} }
  /* Crest & paper grain styling */
  .panel{ position:relative; }
  .crest{ position:absolute; left:50%; top:50%; width:min(52vmin, 560px); height:auto; transform: translate(-50%, -56%); color: var(--accent); opacity:.22; pointer-events:none; z-index:0;
          filter: drop-shadow(0 1px 0 rgba(255,255,255,.35)); }
  .hero{ position:relative; z-index:1; }
  @keyframes crest-breathe{ 0%{ transform: translate(-50%,-56%) scale(.985);} 100%{ transform: translate(-50%,-56%) scale(1.01);} }
  .crest{ animation: crest-breathe 14s ease-in-out infinite alternate; }
  @media (prefers-reduced-motion: reduce){ .crest{ animation:none; } }

  .grain{ position:fixed; inset:-2vmax; z-index:0; opacity:.035; pointer-events:none; mix-blend-mode: multiply; }
  /* Stronger contrast + cross‑browser text fallback */
  .panel{ z-index:3; }
  /* default: readable solid color */
  .hero{ color:#1f2937; }
  .line .en{ color:#1f2937; }
  /* use gradient only if supported */
  @supports (-webkit-background-clip:text){
    .hero{ background: linear-gradient(90deg, #1f2937, #4b5563); -webkit-background-clip:text; color: transparent; -webkit-text-fill-color: transparent; }
    .line .en{ background: linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip:text; color: transparent; -webkit-text-fill-color: transparent; }
  }
  @supports (background-clip:text){
    .hero{ background: linear-gradient(90deg, #1f2937, #4b5563); background-clip:text; color: transparent; }
    .line .en{ background: linear-gradient(90deg, var(--accent), var(--accent-2)); background-clip:text; color: transparent; }
  }
</style>
</head>
<body>
<button class="mode" id="modeBtn" aria-label="切换主题" title="Toggle theme"></button>
<div class="palette" id="palette" role="toolbar" aria-label="配色">
  <button class="swatch gold" data-theme="gold" title="Gold"></button>
  <button class="swatch rose" data-theme="rose" title="Rose"></button>
  <button class="swatch emerald" data-theme="emerald" title="Emerald"></button>
  <button class="swatch sapphire" data-theme="sapphire" title="Sapphire"></button>
</div>
<div class="float-layer" id="floatLayer" aria-hidden="true"></div>
<div class="garden" id="garden" aria-hidden="true"></div>
<!-- Paper grain overlay for premium paper texture -->
<svg class="grain" aria-hidden="true" preserveAspectRatio="none" viewBox="0 0 100 100">
  <filter id="grainFilter">
    <feTurbulence type="fractalNoise" baseFrequency="0.95" numOctaves="3" seed="7" stitchTiles="stitch"/>
    <feColorMatrix type="saturate" values="0"/>
  </filter>
  <rect width="100%" height="100%" filter="url(#grainFilter)"/>
</svg>
<div class="sparkles" id="sparkles" aria-hidden="true"></div>
<div class="vignette" aria-hidden="true"></div>

<div class="wrap">
  <main class="panel" id="panel">
    <!-- Fine-line floral crest for a luxury touch -->
    <svg class="crest" viewBox="0 0 200 200" aria-hidden="true">
      <defs>
        <path id="petal" d="M0,34 Q7,46 0,58 Q-7,46 0,34Z" />
        <path id="ray" d="M0,70 L0,92" />
      </defs>
      <g transform="translate(100,100)" fill="none" stroke="currentColor" stroke-width="1.1" stroke-linecap="round" stroke-linejoin="round">
        <circle r="72" opacity=".9"/>
        <circle r="52" opacity=".75"/>
        <circle r="32" opacity=".6"/>
        <g opacity=".85">
          <use href="#petal"/><use href="#petal" transform="rotate(15)"/><use href="#petal" transform="rotate(30)"/>
          <use href="#petal" transform="rotate(45)"/><use href="#petal" transform="rotate(60)"/><use href="#petal" transform="rotate(75)"/>
          <use href="#petal" transform="rotate(90)"/><use href="#petal" transform="rotate(105)"/><use href="#petal" transform="rotate(120)"/>
          <use href="#petal" transform="rotate(135)"/><use href="#petal" transform="rotate(150)"/><use href="#petal" transform="rotate(165)"/>
          <use href="#petal" transform="rotate(180)"/><use href="#petal" transform="rotate(195)"/><use href="#petal" transform="rotate(210)"/>
          <use href="#petal" transform="rotate(225)"/><use href="#petal" transform="rotate(240)"/><use href="#petal" transform="rotate(255)"/>
          <use href="#petal" transform="rotate(270)"/><use href="#petal" transform="rotate(285)"/><use href="#petal" transform="rotate(300)"/>
          <use href="#petal" transform="rotate(315)"/><use href="#petal" transform="rotate(330)"/><use href="#petal" transform="rotate(345)"/>
        </g>
        <g opacity=".45">
          <use href="#ray"/><use href="#ray" transform="rotate(15)"/><use href="#ray" transform="rotate(30)"/><use href="#ray" transform="rotate(45)"/>
          <use href="#ray" transform="rotate(60)"/><use href="#ray" transform="rotate(75)"/><use href="#ray" transform="rotate(90)"/><use href="#ray" transform="rotate(105)"/>
          <use href="#ray" transform="rotate(120)"/><use href="#ray" transform="rotate(135)"/><use href="#ray" transform="rotate(150)"/><use href="#ray" transform="rotate(165)"/>
          <use href="#ray" transform="rotate(180)"/><use href="#ray" transform="rotate(195)"/><use href="#ray" transform="rotate(210)"/><use href="#ray" transform="rotate(225)"/>
          <use href="#ray" transform="rotate(240)"/><use href="#ray" transform="rotate(255)"/><use href="#ray" transform="rotate(270)"/><use href="#ray" transform="rotate(285)"/>
          <use href="#ray" transform="rotate(300)"/><use href="#ray" transform="rotate(315)"/><use href="#ray" transform="rotate(330)"/><use href="#ray" transform="rotate(345)"/>
        </g>
      </g>
    </svg>
    <h1 id="title" class="hero gold">24</h1>
    <section id="countdown" class="countdown" role="timer" aria-live="polite" aria-atomic="true">
      <div class="dd"><span class="num" id="d">0</span><span class="lab">Days</span></div>
      <div class="dd"><span class="num" id="h">0</span><span class="lab">Hours</span></div>
      <div class="dd"><span class="num" id="m">0</span><span class="lab">Minutes</span></div>
      <div class="dd"><span class="num" id="s">0</span><span class="lab">Seconds</span></div>
    </section>

    <section id="reveal" class="reveal" aria-live="polite">
      <div class="line">
        <span class="en">To your 24, all in bloom;</span>
        <span class="zh">敬二十四，皆是盛开。</span>
      </div>
    </section>
  </main>
</div>

<script>
// --- cache bust: ensure fresh load even with CDN/browser cache ---
(function(){
  var VERSION = 'bloom24-2025-11-11-001';
  try{
    var u = new URL(window.location.href);
    // keep other params (like unlock) and only set v
    if (u.protocol.indexOf('http') === 0){
      var current = u.searchParams.get('v');
      if (current !== VERSION){
        u.searchParams.set('v', VERSION);
        window.location.replace(u.toString());
      }
    }
  }catch(e){/* no-op */}
})();
</script>
<script>
(function(){
  // Unlock time: 2025-11-11 00:00 at GMT+7 == 2025-11-10 17:00:00Z
  let unlockUTC = Date.parse('2025-11-10T17:00:00Z');
  const params = new URLSearchParams(location.search);
  if (params.get('unlock') === 'now') unlockUTC = Date.now();

  const phrases = [
    'Bloom softly; 花正好。',
    'Be light and tender; 愿温柔且明亮。',
    'Shine quiet, love loud; 温柔发光，热烈去爱。',
    'Still pure, still brave; 仍纯仍勇。',
    'May peace hug you; 愿安宁拥你。',
    'Soft as moonlight; 柔如月光。',
    'Be kind to yourself; 温柔以待。',
    'Let the world be gentle to you; 愿世界温柔待你。',
    'Quietly shining; 悄然闪光。',
    'Walk your own rhythm; 走自己的节奏。',
    'She blooms, she conquers; 她盛放，她自成光。',
    'No rush, no pause; 不慌不忙。',
    'Her life, her rules; 她的生活，她的世界。',
    'Grace in every step; 步步生花。'
  ];

  const floatLayer = document.getElementById('floatLayer');
  const garden = document.getElementById('garden');
  const sparkleLayer = document.getElementById('sparkles');
  const dEl = document.getElementById('d');
  const hEl = document.getElementById('h');
  const mEl = document.getElementById('m');
  const sEl = document.getElementById('s');
  const countdown = document.getElementById('countdown');
  const reveal = document.getElementById('reveal');
  const titleEl = document.getElementById('title');
  const modeBtn = document.getElementById('modeBtn');
  const paletteBar = document.getElementById('palette');

  // Theme init
  modeBtn.addEventListener('click', ()=> document.documentElement.classList.toggle('noir'));
  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){ document.documentElement.classList.add('noir'); }
  paletteBar.addEventListener('click', (e)=>{ const t=e.target.closest('[data-theme]'); if(!t) return; document.documentElement.setAttribute('data-theme', t.dataset.theme); });

  // Countdown
  function setNum(el, val){ if(el.textContent !== val){ el.textContent = val; el.classList.remove('tick'); void el.offsetWidth; el.classList.add('tick'); } }
  function updateCountdown(){
    const now = Date.now(); let diff = Math.max(0, unlockUTC - now);
    const days = Math.floor(diff / 86400000); diff -= days*86400000;
    const hours = Math.floor(diff / 3600000); diff -= hours*3600000;
    const mins = Math.floor(diff / 60000); diff -= mins*60000;
    const secs = Math.floor(diff / 1000);

    setNum(dEl, String(days));
    setNum(hEl, String(hours).padStart(2,'0'));
    setNum(mEl, String(mins).padStart(2,'0'));
    setNum(sEl, String(secs).padStart(2,'0'));

    if (now >= unlockUTC) doReveal();
  }
  let countdownTimer = setInterval(updateCountdown, 1000); updateCountdown();

  // Floating phrases
  let floatCount = 0; const MAX_FLOAT = 22;
  function spawnPhrase(){
    if (reveal.classList.contains('active')) return;
    const el = document.createElement('div'); el.className = 'phrase';
    el.textContent = phrases[Math.floor(Math.random()*phrases.length)];
    const vw = Math.max(document.documentElement.clientWidth, window.innerWidth||0);
    const vh = Math.max(document.documentElement.clientHeight, window.innerHeight||0);
    const x = Math.random()*vw*0.85; const y = vh + (Math.random()*80 + 10);
    const dx = (Math.random()*70) - 35; const rot = (Math.random()*6 - 3).toFixed(2) + 'deg'; const op = (Math.random()*0.5 + 0.25).toFixed(2);
    el.style.setProperty('--x', x + 'px'); el.style.setProperty('--y', y + 'px'); el.style.setProperty('--dx', dx + 'px'); el.style.setProperty('--rot', rot); el.style.setProperty('--op', op);
    floatLayer.appendChild(el); el.addEventListener('animationend', ()=>{ el.remove(); floatCount = Math.max(0, floatCount-1); });
    floatCount++; if (floatCount > MAX_FLOAT){ const first = floatLayer.querySelector('.phrase'); if(first){ first.remove(); floatCount--; } }
  }
  const floatTimer = setInterval(spawnPhrase, 750);

  // Reveal
  let revealed = false;
  function doReveal(){
    if (revealed) return; revealed = true;
    clearInterval(countdownTimer); clearInterval(floatTimer); floatLayer.innerHTML = '';
    countdown.style.display = 'none'; titleEl.classList.add('fade');
    reveal.classList.add('active');
    document.getElementById('title').classList.add('fade-out');
    spawnGarden(); spawnSparkles();
  }

  // Garden bloom (SVG)
  function createFlower(x,y,hue){
    const el = document.createElementNS('http://www.w3.org/2000/svg','svg'); el.setAttribute('class','flower'); el.setAttribute('viewBox','0 0 100 100'); el.style.left=x+'px'; el.style.top=y+'px'; el.style.animationDelay=(Math.random()*0.8).toFixed(2)+'s';
    const g = document.createElementNS('http://www.w3.org/2000/svg','g'); g.setAttribute('transform','translate(50,50)');
    for(let i=0;i<6;i++){ const p=document.createElementNS('http://www.w3.org/2000/svg','ellipse'); p.setAttribute('cx','0'); p.setAttribute('cy','24'); p.setAttribute('rx','12'); p.setAttribute('ry','22'); p.setAttribute('fill',`hsl(${hue + i*6}, 60%, 75%)`); p.setAttribute('opacity','0.95'); p.setAttribute('transform',`rotate(${i*60})`); g.appendChild(p);} 
    const c = document.createElementNS('http://www.w3.org/2000/svg','circle'); c.setAttribute('cx','0'); c.setAttribute('cy','0'); c.setAttribute('r','10'); c.setAttribute('fill',`hsl(${hue}, 70%, 60%)`); c.setAttribute('opacity','0.95');
    el.appendChild(g); el.appendChild(c); return el; }

  function spawnGarden(){
    const vw = Math.max(document.documentElement.clientWidth, window.innerWidth||0);
    const vh = Math.max(document.documentElement.clientHeight, window.innerHeight||0);
    const N = Math.round((vw*vh)/22000);
    for(let i=0;i<N;i++){ const x=Math.random()*vw*0.95+vw*0.025; const y=Math.random()*vh*0.8+vh*0.1; const hue=Math.floor(Math.random()*24+320); const f=createFlower(x,y,hue); garden.appendChild(f);} }

  // Sparkles
  function spawnSparkles(){
    const vw = Math.max(document.documentElement.clientWidth, window.innerWidth||0);
    const vh = Math.max(document.documentElement.clientHeight, window.innerHeight||0);
    const count = Math.round((vw*vh)/40000);
    for(let i=0;i<count;i++){ const s=document.createElement('div'); s.className='sparkle'; s.style.left=(Math.random()*vw)+'px'; s.style.top=(Math.random()*vh)+'px'; s.style.animationDelay=(Math.random()*1.2).toFixed(2)+'s'; sparkleLayer.appendChild(s); setTimeout(()=>s.remove(), 4200);} }
})();
</script>
</body>
</html>
